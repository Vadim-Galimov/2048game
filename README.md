# 2048 game


<!-- PROJECT LOGO -->
<br />
<div align="center">
  <a href="https://vadim-galimov.github.io/2048game/">
    <img src="readme-logo.jpg" alt="Logo" width="80" height="80">
  </a>
  
 <p  align="center"> &#8657; попробовать &#8657; </p>

</div>




<!-- ABOUT THE PROJECT -->


## Правила игры:

### Старт уровня:

• игрок запускается сразу на пустом уровне, где есть 2 плитки с
цифрой «2». Счёт изначально равен 0.


### Определение хода:

• Игрок может пролистнуть (нажать, сдвинуть курсор/палец,
отпустить) в одну из сторон: влево, вправо, вверх, вниз. Должно
быть минимальное расстояние, на которое игрок должен
сдвинуть курсор, чтобы это посчиталось за ход. Если игрок
сдвигает курсор/палец по диагонали, но ход делается
относительно той оси, по которой он сделал большее движение.
Например, если игрок сдвинул курсор на 200px вверх и 180px
вправо, то совершается ход вверх. Также доступно управление клавиатурой.


### Какие плитки можно соединить?

• Плитки можно соединить, если они имеют одинаковое значение
и находятся рядом (имеют 1 общее ребро).
После хода игрока:

• Все плитки сдвигаются в требуемом направлении

o Если 2 плитки находятся рядом и сдвигаются «друг к
другу», то они соединяются в 1 плитку со значением, в 2
раза больше. Значения старых плиток прибавляются в
счёт.

• После хода на поле в случайном месте появляется новая плитка.


### Новый ход:
С вероятностью 90% это плитка со значением «2», с
вероятностью 10% - со значением «4».

### Условия победы и проигрыша:
• Если после хода на поле появляется плитка со значением
«2048», то появляется надпись с текстом "YOU WIN!".
После нажатия «Try again» игра начинается заново.
• Если после хода и добавления новой плитки возникает ситуация,
что не существует плиток, которые можно соединить, 
появляется надпись с текстом "GAME OVER!". После
нажатия «Try again» игра начинается заново.
:

## Механика игры:

### Старт

-Создаю две ячейки

-Рисую счёт

-Включаю отрисовку тела

-Включаю управление клавиатурой

-Включаю управление мышкой

-Включаю управление тачпадом

-Включаю отслеживание координат курсором \(на случай, если он будет над активной кнопкой - тогда курсор изменится)


### Ход:

#### Подготовка:
Проверка на блок хода

Ставлю направление

Ставлю блок хода

Включаю отрисовку тела на две фазы

#### Фаза 1:

Раздаю билеты ячейкам

Двигаю ячейки \(пошаговое движение)

#### Фаза 2:

Включаю анимации:

а) появления новой ячейки 
б) слияния двух ячеек

Меняю значения переменных ячеек

Пересчитываю заного координаты всех ячеек \( защита от мелких погрешностей)

Считаю счёт

Рисую счёт

Удаляю старые ячейки \(только одна из пары удаляется, вторая становится в два раза больше в результате слияния)

Проверка на движение \(если хотя бы одна ячейка поменяла своё положение, то ход считается состоявшимся)

&#9940;**Если ход был не состоявшимся, то на этом этапе функция прерывается**

Создание ячейки 

Проверка на победу

Проверка на луз 

#### После хода:

Анимация тела прекращается

Если ни луз, ни победа, то снимается блок хода

### Победа:

#### Условие:

Проверяю значения всех ячеек, если хоть одна равна 2048 - победа

#### Действия:

Поле накрывает полупрозрачный золотой фон

Появляется надпись "YOU WIN!"

Появляется кнопка "Try again", которая перезапустит игру


## Тесты:

1) загрузка прошла

2) стрелки работают

3) пароль админа работает




## Файлы:

globalVariables.js

Глобальные переменные

buttons.js

Кнопки (из меню управления)

drawHead.js

Отрисовка хэдера

drawBody.js

Отрисовка тела

classes.js

Классы

start.js

Старт

turn.js

Ход

lose-win.js

проверка на победу или поражения и действия связанные с ними

adminPanel.js

две команды:
-создание ситуации за 1 ход до победы
-создание ситуации за 1 ход до поражения


## Тайминги:

	Пошёл ход:
  
	0s
  
	запусается интервальный  drawCells() в течении 2 phaseTime
	
	запусакется timerMakeStep() - ячейки начинают двигаться в течении 1 phaseTime

	1 phaseTime
	
	Заканчивается timerMakeStep()
	
	Смена данных ячеек
		
	выбор действия, которое сработает через 1 phaseTime:
	
	{
	
		Если луз или вин, через 1 phaseTime сработает  одно из этих событий
	
		Если оба не сработали - через 1 phaseTime снимается блок хода
	
	}

	2 phaseTime
	
	Срабатывает одно из событий в скобках
	
	Заканчивается прорисовка



## Дополнительно:

Введите с клавиатуры "admin" для доступа к панели администратора.



